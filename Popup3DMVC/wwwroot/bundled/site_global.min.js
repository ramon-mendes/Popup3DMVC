function AjaxUploadFile(n){var i=n.name.split(".").pop().toLowerCase(),t,r;if(i!=="stl"){alert("Selecione um arquivo com extensão .stl");return}$(".overlay-upload").addClass("active");t=new FormData;t.append("FileUpload",n);r=$.ajax({type:"post",url:"/Home/Upload",data:t,contentType:!1,processData:!1,success:function(n){window.location="/Imprimir/Upload/"+n.id},error:function(){alert("Erro ao processar o seu arquivo .stl");$(".overlay-upload").removeClass("active")},xhr:function(){var n=null;return n=window.ActiveXObject?new window.ActiveXObject("Microsoft.XMLHTTP"):new window.XMLHttpRequest,n.upload.addEventListener("progress",function(n){if(n.lengthComputable){var t=Math.round(n.loaded*100/n.total);$("#prog").text(t+"%")}},!1),n}})}var isAdvancedUpload,el_html;$.fn.serializeObject=function(){var n={},t=this.serializeArray();return $.each(t,function(){n[this.name]?(n[this.name].push||(n[this.name]=[n[this.name]]),n[this.name].push(this.value||"")):n[this.name]=this.value||""}),n};let orig=$.fn.popover,proto=$.extend({},$.fn.popover.Constructor.prototype);$.fn.popover=function(n){return this.each(function(){orig.call($(this),n);typeof n.show=="function"&&($(this).data("bs.popover").show=function(){n.show.call(this.tip,this);proto.show.call(this)})})};let els_a_pop=$("nav#nav-main .dropdown > a.pop"),el_cur_a_pop,el_cur_popover;els_a_pop.popover({container:"nav#nav-main",placement:"bottom",trigger:"manual",html:!0,content:function(){return this.nextElementSibling.innerHTML},show:function(){el_cur_popover=this;$(this).css({marginTop:30}).animate({marginTop:15},250);setTimeout(()=>{let n=this.querySelector("input");n&&n.focus()},10)}}).click(function(n){n.preventDefault();els_a_pop.popover("hide");el_cur_a_pop===this?el_cur_a_pop=undefined:(el_cur_a_pop=this,$(this).popover("show"))});$("nav#nav-main").on("focusout",function(n){console.log(n);$(n.relatedTarget).closest(el_cur_popover).length===0&&(els_a_pop.popover("hide"),el_cur_a_pop=undefined)});$("nav#nav-main").on("submit","form.login-form",function(n){let r=$(this).serializeObject(),t=$("fieldset",this);t.prop("disabled",!0);let i=$(".alert",this);return i.hide(),$.post("/Usuario/Login",r).done(function(){location.reload()}).fail(function(){t.prop("disabled",!1);i.show()}),n.preventDefault(),!1});$("#file-select").on("change",function(){AjaxUploadFile(this.files[0])});if(isAdvancedUpload=function(){var n=document.createElement("div");return("draggable"in n||"ondragstart"in n&&"ondrop"in n)&&"FormData"in window&&"FileReader"in window}(),isAdvancedUpload){el_html=$("html");el_html.on("drag dragstart dragend dragover dragenter dragleave drop",function(n){n.preventDefault();n.stopPropagation()}).on("dragover dragenter",function(){$(".overlay-dnd").show()}).on("dragleave dragend drop",function(){$(".overlay-dnd").hide()}).on("drop",function(n){if(files=n.originalEvent.dataTransfer.files,files.length!==1){alert("Você deve soltar somente um arquivo");return}AjaxUploadFile(files[0])})}(function(){var n;n=jQuery;n.bootstrapGrowl=function(t,i){var r,f,u;i=n.extend({},n.bootstrapGrowl.default_options,i);r=n("<div>");r.attr("class","bootstrap-growl alert");i.type&&r.addClass("alert-"+i.type);i.allow_dismiss&&(r.addClass("alert-dismissible"),r.append('<button class="close" data-dismiss="alert" type="button"><span aria-hidden="true">&#215;<\/span><span class="sr-only">Close<\/span><\/button>'));r.append(t);i.top_offset&&(i.offset={from:"top",amount:i.top_offset});u=i.offset.amount;n(".bootstrap-growl").each(function(){return u=Math.max(u,parseInt(n(this).css(i.offset.from))+n(this).outerHeight()+i.stackup_spacing)});f={position:"body"===i.ele?"fixed":"absolute",margin:0,"z-index":"9999",display:"none"};f[i.offset.from]=u+"px";r.css(f);"auto"!==i.width&&r.css("width",i.width+"px");n(i.ele).append(r);switch(i.align){case"center":r.css({left:"50%","margin-left":"-"+r.outerWidth()/2+"px"});break;case"left":r.css("left","20px");break;default:r.css("right","20px")}return r.fadeIn(),0<i.delay&&r.delay(i.delay).fadeOut(function(){return n(this).alert("close")}),r};n.bootstrapGrowl.default_options={ele:"body",type:"info",offset:{from:"top",amount:20},align:"right",width:250,delay:4e3,allow_dismiss:!0,stackup_spacing:10}}).call(this);